var p=class{name;navbar_item_style="none";bs4_item_style="none";enable_on_load=!0;page_html;constructor(){}updateComponentDropdown(){$(".navbar-tab-item").css("display",this.navbar_item_style),$(".bs4-item").css("display",this.bs4_item_style),this.navbar_item_style==="none"?$("#settings-component a[name='header']").trigger("click"):$("#settings-component a[name='tab_panel']").trigger("click")}getPageHTML(t,e=""){return t.replaceAll("$page_id$",this.getTabID()).replaceAll("$title$",e)}updatePage(){let t=$("#canvas-title").html();$(".page-canvas").html(this.getPageHTML(this.page_html,t))}enableSortablePage(t){Sortable.create(document.getElementById(t),{group:{name:"shared",put:function(e,a,n){return!n.classList.contains("col-sm")}}})}getTabID(){return Math.round(Math.random()*8999+1e3)}};var y=class extends p{name="basicPage";page_html=`
        <div id="canvas-page" class="designer-page-template container-fluid" data-shinyfunction="basicPage"></div>
    `};var I=class extends p{name="fillPage";page_html=`
        <div id="canvas-page" class="designer-page-template" 
             data-shinyfunction="fillPage"
             data-shinyattributes="title = &quot;$title$&quot;, theme = bslib::bs_theme(4)"></div>
    `};var T=class extends p{name="fluidPage";page_html=`
        <div id="canvas-page" class="designer-page-template container-fluid" 
             data-shinyfunction="fluidPage"
             data-shinyattributes="title = &quot;$title$&quot;, theme = bslib::bs_theme(4)"></div>
    `};var C=class extends p{name="bootstrapPage";page_html=`
        <div id="canvas-page" class="designer-page-template container-fluid" 
             data-shinyfunction="bootstrapPage"
             data-shinyattributes="title = &quot;$title$&quot;, theme = bslib::bs_theme(4)"></div>
    `};var q=class extends p{name="navbarPage";navbar_item_style="";enable_on_load=!1;page_html=`
        <div class="designer-page-template">
            <nav class="navbar navbar-default navbar-static-top" role="navigation">
                <div class="container-fluid">
                    <div class="navbar-header">
                        <span class="navbar-brand">$title$</span>
                    </div>
                    <ul class="nav navbar-nav" data-tabsetid="$page_id$"></ul>
                </div>
            </nav>
            <div class="container-fluid navbar-page-tabs">
                <div id="canvas-page" class="tab-content"
                     data-tabsetid="$page_id$" data-shinyfunction="navbarPage"
                     data-shinyattributes="title = &quot;$title$&quot;, theme = bslib::bs_theme(4)"></div>
            </div>
        </div>
    `};var P=class extends p{name="dashboardPage";navbar_item_style="";bs4_item_style="";enable_on_load=!1;page_html=`
        <div id="canvas-page" class="wrapper designer-page-template"
             data-shinyfunction="bs4Dash::dashboardPage" data-shinyattributes="title = &quot;$title$&quot;">
            <nav data-fixed="false" class="main-header navbar navbar-expand navbar-white navbar-light"
                 data-shinyfunction="bs4Dash::dashboardHeader" data-shinyattributes="title = &quot;$title$&quot;">
                <ul class="navbar-nav">
                    <a class="nav-link" data-widget="pushmenu" href="#">
                        <i class="fa fa-bars" role="presentation" aria-label="bars icon"></i>
                    </a>
                </ul>
                <ul class="navbar-nav ml-auto navbar-right"></ul>
            </nav>
            <aside id="sidebarId" data-fixed="true" data-minified="true" data-collapsed="false"
                   data-disable="FALSE" class="main-sidebar sidebar-dark-primary elevation-4"
                   data-shinyfunction="bs4Dash::dashboardSidebar">
                <div class="brand-link">$title$</div>
                <div class="sidebar" id="sidebarItemExpanded">
                    <nav class="mt-2">
                        <ul class="nav nav-pills nav-sidebar flex-column sidebar-menu nav-child-indent"
                            data-widget="treeview" role="menu" data-accordion="true" data-shinyfunction="bs4Dash::sidebarMenu">
                            <div id="tabs_$page_id$" class="sidebarMenuSelectedTabItem"></div>
                        </ul>
                    </nav>
                </div>
            </aside>
            <div class="content-wrapper" data-shinyfunction="bs4Dash::dashboardBody">
                <section class="content">
                    <div class="tab-content"></div>
                </section>
            </div>
        </div>
    `};var h;function k(){var s=$("#settings-page_type input:radio:checked").val();return s==="basicPage"?h=new y:s==="fillPage"?h=new I:s==="fluidPage"?h=new T:s==="bootstrapPage"?h=new C:s==="navbarPage"?h=new q:s==="dashboardPage"?h=new P:h=new y,h.updatePage(),h.enable_on_load&&h.enableSortablePage("canvas-page"),h.updateComponentDropdown(),h}function K(){$("#canvas-page").html()===""||$("#canvas-page.wrapper .tab-content").html()===""?($("#canvas-page").html("<div></div>"),k()):$("#warning_modal").modal()}function Q(){$(`#settings-page_type input[value="${h.name}"]`).trigger("click")}function X(s){let t=$(s.target).val();if($("#canvas-title").html(t),$(".navbar-brand").html(t),$(".brand-link").html(t),$("#canvas-page").data("shinyattributes")){var e=$("#canvas-page").data("shinyattributes").replace(/"[^"]+"/,`"${t}"`);$("#canvas-page").attr("data-shinyattributes",e)}if($("#canvas-page>.main-header").data("shinyattributes")){var a=$("#canvas-page>.main-header").data("shinyattributes").replace(/"[^"]+"/,`"${t}"`);$("#canvas-page>.main-header").attr("data-shinyattributes",a)}}function Z(){k(),$("#settings-page_type").on("change",K),$("#cancel_reset").on("click",Q),$("#confirm_reset").on("click",k),$("#app_name").on("change keyup",X)}function tt(){$(".copy-ui-button").on("click",lt),$("#remove_label").on("change",st),$("#remove_colour").on("change",nt),$("#remove_border").on("change",it),$(document).on("click",".clickable-dropdown",s=>{s.stopPropagation()}),$("#preview").on("click",()=>{$(".page-canvas-shell").addClass("preview")}),$("#canvas-close_preview").on("click",()=>{$(".page-canvas-shell").removeClass("preview")}),Shiny.addCustomMessageHandler("toggleBS4DashDeps",ot)}function st(){this.checked?$(".designer-page-template").removeClass("hidden-after-label"):$(".designer-page-template").addClass("hidden-after-label")}function nt(){this.checked?$(".designer-page-template").removeClass("hidden-colour"):$(".designer-page-template").addClass("hidden-colour")}function it(){this.checked?$(".designer-page-template").removeClass("hidden-borders"):$(".designer-page-template").addClass("hidden-borders")}function lt(){var s=document.getElementById("settings-code-code").textContent;navigator.clipboard.writeText(s)}function ot(s){let t=document.styleSheets;for(var e=0;e<t.length;e++){var a=t.item(e);(a.href.includes("AdminLTE")||a.href.includes("bs4Dash"))&&(a.disabled=s==="hide")}}var i=class{updatable=!0;display_comments=!0;display_container=!0;name;parameters;tags;types;notes;sortable_settings;html;constructor(){$("#component_settings").css("display",""),$("#tab_settings").css("display","none"),this.updateLabels([{id:"type",text:"Type"},{id:"id",text:"Input ID"}])}showRelevantOptions(){$(".component-settings").css("display","");for(let t=0;t<this.parameters.length;t++)$(".component-settings[data-component= '"+this.parameters[t]+"']").css("display","unset");this.updateTitle(),this.updateNotes(),$(".component-container").css("display",this.display_container?"":"none"),$(".component-comments").css("display",this.display_comments?"":"none")}updateTitle(){let t=this.name?`${this.name} Settings`:null;$("#sidebar-title").html(t)}updateNotes(){if($("#sidebar-notes").html(null),this.notes){$("#sidebar-notes").html("<h3>Notes</h3><ul></ul>");for(let t=0;t<this.notes.length;t++)$("#sidebar-notes ul").append("<li>"+this.notes[t]+"</li>")}}createComponent(){return this.html}replaceHTMLPlaceholders(t,e){for(let a in e)t=t.replaceAll("$"+a+"$",e[a]);return t}updateComponent(t=!1){$(".component-container").html(null);let e=this.createComponent();$(".component-container").html(e),this.addComments(),t&&this.enableSortable()}enableSortable(){Sortable.create(document.getElementById("sidebar-container"),{group:{name:"shared",pull:"clone",put:!1},onClone:function(t){c.sortable_settings&&(c.name==="Box"?Sortable.create($(t.item).find(".card-body")[0],c.sortable_settings):Sortable.create(t.item,c.sortable_settings))},onEnd:function(t){$('.page-canvas [data-toggle="tooltip"]').tooltip(),(c.updatable||$("#sidebar-comments").val()!=="")&&($("#sidebar-comments").val(""),c.updateComponent())}})}addComments(){let t=$("#sidebar-comments").val();t&&($(".component-container>.designer-element").attr("data-shinycomments",t),$(".component-container>.designer-element").attr("title",t),$(".component-container>.designer-element").attr("data-toggle","tooltip"))}updateTag(){if(this.tags){var t=$("#sidebar-tag").selectize()[0].selectize;t.clearOptions(!0),t.addOption(this.tags),t.refreshOptions(!1),t.addItem(this.tags[0].value)}}updateType(){if(this.types){var t=$("#sidebar-type").selectize()[0].selectize;t.clearOptions(!0),t.addOption(this.types),t.refreshOptions(!1),t.addItem(this.types[0].value)}}updateTextInputs(t){for(var e=0;e<t.length;e++)this.updateTextInput(t[e].id,t[e].text)}updateTextInput(t,e=""){$(`#sidebar-${t}`).val(e)}updateLabels(t){for(var e=0;e<t.length;e++)this.updateLabel(t[e].id,t[e].text)}updateLabel(t,e=""){$(`label[for='sidebar-${t}']`).html(e)}createID(t=""){return t=t&&t+"_",t+Math.random().toString(36).substring(2,12)}validateCssUnit(t,e){return this._regex.test(t)?t:/^\d+$/.test(t)?t+"px":e}_regex=/^(auto|inherit|fit-content|calc\(.*\)|((\.\d+)|(\d+(\.\d+)?))(%|in|cm|mm|ch|em|ex|rem|pt|pc|px|vh|vw|vmin|vmax))$/};var w=class extends i{name="Header";parameters=["tag","text"];tags=[{value:"h1",label:"h1",text:"h1"},{value:"h2",label:"h2",text:"h2"},{value:"h3",label:"h3",text:"h3"},{value:"h4",label:"h4",text:"h4"},{value:"h5",label:"h5",text:"h5"},{value:"h6",label:"h6",text:"h6"}];html='<$tag$ class="designer-element" data-shinyfunction="$tag$">$value$</$tag$>';constructor(){super(),this.showRelevantOptions(),this.updateTag(),this.updateTextInput("text","Header")}createComponent(){let t=$("#sidebar-tag").val(),e=$("#sidebar-text").val();return this.replaceHTMLPlaceholders(this.html,{tag:t,value:e})}};var L=class extends i{name="Row";parameters=[];updatable=!1;html='<div class="designer-element row row-designer" data-shinyfunction="fluidRow"></div>';notes=["The only component that can be a direct child of a row are columns.","By default, a row will have no height and is determined by the contents inside. To easily drop elements into the rows, they have a minimum height of 50px in this app."];sortable_settings={group:{name:"shared",put:function(t,e,a){return a.classList.contains("col-sm")}}};constructor(){super(),this.showRelevantOptions()}};var D=class extends i{name="Column";parameters=["width_num","offset"];updatable=!1;html=`
        <div class="designer-element col-sm col-sm-$width$$offset_class$"
             data-shinyfunction="column"
             data-shinyattributes="width = $width$$offset_r$"></div>
    `;notes=["Columns can only be included in <b>rows</b>.","Rows are split into 12 column units, if the sum of columns' width exceeds 12, they get wrapped onto a new line."];sortable_settings={group:{name:"shared",put:function(t,e,a){return!a.classList.contains("col-sm")}}};constructor(){super(),this.showRelevantOptions(),$("#sidebar-width_num").attr("min",1)}createComponent(){let t=$("#sidebar-width_num").val(),e=$("#sidebar-offset").val(),a=e>0?` offset-md-${e}`:"",n=e>0?`, offset = ${e}`:"";return this.replaceHTMLPlaceholders(this.html,{width:t,offset_class:a,offset_r:n})}};var S=class extends i{name="Text";parameters=["tag","textarea"];tags=[{value:"p",label:"Paragraph <p>",text:"Paragraph <p>"},{value:"ol",label:"Ordered List <ol>",text:"Ordered List <ol>"},{value:"ul",label:"Unordered List <ul>",text:"Unordered List <ul>"}];html='<$tag$ class="designer-element" data-shinyfunction="tags$$tag$">$value$</$tag$>';constructor(){super(),this.showRelevantOptions(),this.updateTag(),this.updateTextInput("textarea","")}createComponent(){let t=$("#sidebar-tag").val(),e=$("#sidebar-textarea").val(),a=t==="p"?e.replace(/\n/g," "):this.createListItems(e);return this.replaceHTMLPlaceholders(this.html,{tag:t,value:a})}createListItems(t){return t.split(`
`).map(e=>'<li data-shinyfunction="tags$li">'+e+"</li>").join("")}};var O=class extends i{name="Input Panel";parameters=[];updatable=!1;html='<div class="designer-element shiny-input-panel shiny-flow-layout" data-shinyfunction="inputPanel"></div>';notes=["By default inputs will be aligned vertically, input panels enable the inputs to be aligned horizontally."];sortable_settings={group:{name:"shared",put:function(t,e,a){return a.classList.contains("form-group")||a.classList.contains("btn")}}};constructor(){super(),this.showRelevantOptions()}};var M=class extends i{name="Input";parameters=["type","id","label","width"];types=[{value:"text",label:"Text",r_func:"textInput"},{value:"textarea",label:"Text Area",r_func:"textAreaInput"},{value:"number",label:"Numeric",r_func:"numericInput"},{value:"password",label:"Password",r_func:"passwordInput"}];notes=["To position several inputs horizontally, they must be put within an input panel."];html=`
        <div class="designer-element form-group shiny-input-container" 
             $style_str$
             data-shinyattributes="inputId = &quot;$id$&quot;, label = &quot;label&quot;$style_str$"
             data-shinyfunction="$r_func$"><label class="control-label">$label$</label>$input_tag$</div>
    `;constructor(){super(),this.showRelevantOptions(),this.updateType(),this.updateTextInput("id",""),this.updateTextInput("label","Label"),this.updateTextInput("width","")}createComponent(){let t=$("#sidebar-label").val(),e=$("#sidebar-id").val();e=e===""?this.createID("input"):e;let a=$("#sidebar-type").val(),n=this.types.find(u=>u.value===a);if(!n)return;let l=n.r_func,r;a==="textarea"?r='<textarea class="form-control" placeholder="textarea input"></textarea>':r=`<input class="form-control" type="${a}" placeholder="${n.label} input">`;let o=this.validateCssUnit($("#sidebar-width").val()),d=o?`width: ${o};`:"",m=o?`, width = &quot;${o}&quot;`:"";return this.replaceHTMLPlaceholders(this.html,{id:e,label:t,r_func:l,input_tag:r,style_str:d,width_str:m})}};var B=class extends i{name="File Input";parameters=["id","label","width"];notes=["To position several inputs horizontally, they must be put within an input panel."];html=`
        <div class="designer-element form-group shiny-input-container"
             data-shinyfunction="fileInput" $style_str$
             data-shinyattributes="inputId = &quot;$id$&quot;, label = &quot;$label$&quot;$width_str$">
            <label class="control-label">$label$</label>
            <div class="input-group">
                <label class="input-group-btn input-group-prepend">
                    <span class="btn btn-default btn-file">
                        Browse...
                        <input type="file" style="position: absolute !important; top: -99999px !important; left: -99999px !important;"/>
                    </span>
                </label>
                <input type="text" class="form-control" placeholder="No file selected" readonly="readonly"/>
            </div>
        </div>
    `;constructor(){super(),this.showRelevantOptions(),this.updateTextInput("id",""),this.updateTextInput("label","Label"),this.updateTextInput("width","")}createComponent(){let t=$("#sidebar-label").val(),e=$("#sidebar-id").val();e=e===""?this.createID("input"):e;let a=this.validateCssUnit($("#sidebar-width").val()),n=a?`width: ${a};`:"",l=a?`, width = &quot;${a}&quot;`:"";return this.replaceHTMLPlaceholders(this.html,{id:e,label:t,style_str:n,width_str:l})}};var H=class extends i{name="Dropdown";parameters=["id","label","width"];notes=["To position several inputs horizontally, they must be put within an input panel."];html=`
        <div class="designer-element form-group shiny-input-container" $style_str$
             data-shinyattributes="inputId = &quot;$id$&quot;, label = &quot;$label$&quot;, choices = NULL$width_str$"
             data-shinyfunction="selectInput">
             <label class="control-label">$label$</label>
             <div>
                <select>
            </div>
        </div>
    `;constructor(){super(),this.showRelevantOptions(),this.updateTextInput("id",""),this.updateTextInput("label","Label"),this.updateTextInput("width","")}createComponent(){let t=$("#sidebar-label").val(),e=$("#sidebar-id").val();e=e===""?this.createID("input"):e;let a=this.validateCssUnit($("#sidebar-width").val()),n=a?`width: ${a};`:"",l=a?`, width = &quot;${a}&quot;`:"";return this.replaceHTMLPlaceholders(this.html,{id:e,label:t,style_str:n,width_str:l})}updateComponent(t=!1){super.updateComponent(t),$(".component-container").find("select").selectize({labelField:"label",valueField:"value",searchField:["label"],placeholder:"select input"})}};var R=class extends i{name="Date";parameters=["id","label","range","width"];notes=["To position several inputs horizontally, they must be put within an input panel."];html=`
        <div class="designer-element form-group shiny-input-container $date_class$" $style_str$
             data-shinyattributes="inputId = &quot;$id$&quot;, label = &quot;$label$&quot;$width_str$"
             data-shinyfunction="$r_func$">
             <label class="control-label">$label$</label>
             $input_tag$
        </div>
    `;date_input_html=`
        <input class="form-control" type="text" title="Date format: yyyy-mm-dd" placeholder="date input"
               data-date-language="en" data-date-week-start="0" data-date-format="yyyy-mm-dd"
               data-date-start-view="month" data-date-autoclose="true"/>
    `;date_range_input_html=`
        <div class="input-daterange input-group input-group-sm">
            <input class="form-control" type="text" title="Date format: yyyy-mm-dd" placeholder="date input"
                   data-date-language="en" data-date-week-start="0" data-date-format="yyyy-mm-dd"
                   data-date-start-view="month" data-date-autoclose="true"/>
            <span class="input-group-addon input-group-prepend input-group-append">
                <span class ="input-group-text"> to </span>
            </span>               
            <input class="form-control" type="text" title="Date format: yyyy-mm-dd" placeholder="date input"
                   data-date-language="en" data-date-week-start="0" data-date-format="yyyy-mm-dd"
                   data-date-start-view="month" data-date-autoclose="true"/>        
        </div>       
    `;constructor(){super(),this.showRelevantOptions(),this.updateTextInput("id",""),this.updateTextInput("label","Label"),this.updateTextInput("width","")}createComponent(){let t=$("#sidebar-label").val(),e=$("#sidebar-id").val();e=e===""?this.createID("input"):e;let a=this.validateCssUnit($("#sidebar-width").val()),n=a?`width: ${a};`:"",l=a?`, width = &quot;${a}&quot;`:"",r=document.getElementById("sidebar-range").checked,o=r?"dateRangeInput":"dateInput",d=r?"shiny-date-range-input":"shiny-date-input",m=r?this.date_range_input_html:this.date_input_html;return this.replaceHTMLPlaceholders(this.html,{id:e,label:t,r_func:o,date_class:d,input_tag:m,style_str:n,width_str:l})}updateComponent(t=!1){super.updateComponent(t),$(".component-container").find("input").bsDatepicker()}};var N=class extends i{name="Checkbox";parameters=["id","label","width"];html=`
        <div class="designer-element form-group shiny-input-container" $style_str$
                 data-shinyfunction="checkboxInput"
                 data-shinyattributes="inputId = &quot;$id&quot;, label = &quot;$label&quot;$width_str$">
            <div class="checkbox">
                <label>
                    <input type="checkbox"><span>$label$</span>
                </label>
            </div>
        </div>
    `;constructor(){super(),this.showRelevantOptions(),this.updateTextInput("id",""),this.updateTextInput("label","Label"),this.updateTextInput("width","")}createComponent(){let t=$("#sidebar-label").val(),e=$("#sidebar-id").val();e=e===""?this.createID("checkbox"):e;let a=this.validateCssUnit($("#sidebar-width").val()),n=a?`width: ${a};`:"",l=a?`, width = &quot;${a}&quot;`:"";return this.replaceHTMLPlaceholders(this.html,{id:e,label:t,style_str:n,width_str:l})}};var U=class extends i{name="Checkbox Group";parameters=["type","id","label","choices","inline","width"];types=[{value:"radio",label:"Radio",r_func:"radioButtons",role:"radiogroup"},{value:"checkbox",label:"Checkbox",r_func:"checkboxGroupInput",role:"group"}];html=`
        <div class="designer-element form-group shiny-input-container $css_class$" $style_str$
             data-shinyfunction="$r_func$" 
             data-shinyattributes="inputId = &quot;$id$&quot;, label = &quot;$label$&quot;$choices_str$$width_str$"
             role="$role">
            <label class="control-label">$label$</label>
            <div class="shiny-options-group">
                $choices$
            </div>
        </div>
    `;constructor(){super(),this.showRelevantOptions(),this.updateType(),this.updateTextInput("id",""),this.updateTextInput("label","Label"),this.updateTextInput("choices",`Choice 1
Choice 2`),this.updateTextInput("width","")}createComponent(){let t=$("#sidebar-label").val(),e=$("#sidebar-id").val();e=e===""?this.createID("checkbox"):e;var a=$("#sidebar-type").val();let n=this.types.find(_=>_.value===a);if(!n)return;let l=n.r_func,r=n.role,o=this.validateCssUnit($("#sidebar-width").val()),d=o?`width: ${o};`:"",m=o?`, width = &quot;${o}&quot;`:"";var u=document.getElementById("sidebar-inline").checked;let v=`shiny-input-${a}group${u?"-inline":""}`,f=$("#sidebar-choices").val(),b=`, choices = c(&quot;${f.replace(/\n/g,"&quot;, &quot;")}&quot;)`,x=f.split(`
`).map(_=>this.createCheckbox(_,e=e,a=a,u=u)).join("");return this.replaceHTMLPlaceholders(this.html,{id:e,label:t,css_class:v,r_func:l,role:r,choices:x,choices_str:b,style_str:d,width_str:m})}createCheckbox(t,e="",a="checkbox",n=!1){var l=n?a+"-inline":a;return`<label class="${l}"><input type="${a}"><span>${t}</span></label>`}};var E=class extends i{name="Slider Input";parameters=["type","id","label","range","width"];types=[{value:"number",label:"Numeric"},{value:"date",label:"Date"},{value:"datetime",label:"Timestamp"}];notes=["To position several inputs horizontally, they must be put within an input panel."];html=`
        <div class="designer-element form-group shiny-input-container" $style_str$
             data-shinyattributes="inputId = &quot;$id$&quot;, label = &quot;$label$&quot;$value_str$$width_str$"
             data-shinyfunction="sliderInput">
            <label class="control-label">$label$</label>
            <input class="js-range-slider"
                   data-data-type="$format$" data-skin="shiny" data-grid="true" data-grid-num="10"
                   data-grid-snap="false" data-prettifyed-enabled="true" data-prettifyed-separator=","
                   data-keyboard="true" $range_attr$ data-time-format="$time_format$"
                   data-step="$step$" data-min="$min$" data-max="$max$" data-from="$from$">
        </div>
    `;constructor(){super(),this.showRelevantOptions(),this.updateType(),this.updateTextInput("id",""),this.updateTextInput("label","Label"),this.updateTextInput("width","")}createComponent(){let t=$("#sidebar-label").val(),e=$("#sidebar-id").val();e=e===""?this.createID("slider"):e;let a=$("#sidebar-type").val(),n=this.validateCssUnit($("#sidebar-width").val()),l=n?`width: ${n};`:"",r=n?`, width = &quot;${n}&quot;`:"",o=document.getElementById("sidebar-range").checked,d=this.getValues(a,o),m=o?'data-type="double" data-drag-interval="true" data-to="$to$"':"";return this.replaceHTMLPlaceholders(this.html,{range_attr:m,id:e,label:t,format:a,min:d.min,max:d.max,step:d.step,from:d.from,to:d.to,style_str:l,width_str:r,value_str:d.value_str,time_format:d.time_format})}getValues(t,e=!1){if(t==="number")return{step:1,min:0,max:10,from:5,to:7,value_str:`, min = 0, max = 10, value = ${e?"c(5, 7)":5}`};let a,n=new Date;t==="date"&&n.setHours(0,0,0,0);let l=t==="date"?1e3*60*60*24:1e3;a=n.getTime();let r=a-5*l,o=a+5*l,d=a,m=a+2*l,u=t==="date"?"Sys.Date()":"Sys.time()",g=t==="date"?"":"000",v=e?`"c(${u}, ${u} + 2${g})"`:u;return{step:l,min:r,max:o,from:d,to:m,time_format:t==="date"?"%F":"%F %T",value_str:`, min = ${u} - 5${g}, max = ${u} + 5${g}, value = ${v}`}}updateComponent(t=!1){super.updateComponent(t);let e=$("#sidebar-type").val();$(".component-container").find("input").ionRangeSlider({prettify:this.getSliderPrettifier(e)})}getSliderPrettifier(t){return t==="date"?function(e){var a=new Date(e);return console.log(a),a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate()}:t==="datetime"?function(e){var a=new Date(e);return console.log(a),a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate()+" "+a.getHours()+":"+a.getMinutes()+":"+a.getSeconds()}:null}};var V=class extends i{name="Button";parameters=["type","id","label","download","width"];types=[{value:"default",label:"Default",css_class:"btn-default"},{value:"primary",label:"Primary",css_class:"btn-primary"},{value:"secondary",label:"Secondary",css_class:"btn-secondary"},{value:"success",label:"Success",css_class:"btn-success"},{value:"danger",label:"Danger",css_class:"btn-danger"},{value:"warning",label:"Warning",css_class:"btn-warning"},{value:"info",label:"Info",css_class:"btn-info"},{value:"light",label:"Light",css_class:"btn-light"},{value:"dark",label:"Dark",css_class:"btn-dark"}];html=`
        <button class="btn $btn_class$ action-button designer-element"
                type="button" $style_str$
                data-shinyfunction="$r_func$"
                data-shinyattributes="$id_arg$ = &quot;$id$&quot;$class_str$$width_str$">
            $download_icon$
            $label$
        </button>
    `;constructor(){super(),this.showRelevantOptions(),this.updateType(),this.updateTextInput("id",""),this.updateTextInput("label","Label"),this.updateTextInput("width","")}createComponent(){let t=$("#sidebar-label").val(),e=$("#sidebar-id").val();e=e===""?this.createID("input"):e;let a=$("#sidebar-type").val(),n=this.types.find(b=>b.value===a);if(!n)return;let l=n.css_class,r=a==="default"?"":`, class = &quot;${l}&quot;`,o=document.getElementById("sidebar-download").checked,d=o?"downloadButton":"actionButton",m=o?'<i class="fa fa-download" role="presentation" aria-label="download icon"></i>':"",u=o?"outputId":"inputId",g=this.validateCssUnit($("#sidebar-width").val()),v=g?`width: ${g};`:"",f=g?`, width = &quot;${g}&quot;`:"";return this.replaceHTMLPlaceholders(this.html,{id:e,id_arg:u,label:t,r_func:d,download_icon:m,btn_class:l,class_str:r,style_str:v,width_str:f})}};var A=class extends i{name="Output";parameters=["type","plot","id","label","inline","textarea","width","height"];types=[{value:"text",label:"Text",css_class:"text-output-element shiny-text-output",r_func:"textOutput",placeholder:"Text Output: "},{value:"verbatim",label:"Verbatim Text",css_class:"verbatimtext-output-element shiny-text-output",r_func:"verbatimTextOutput",placeholder:"Verbatim Text Output: "},{value:"plot",label:"Plot",css_class:"plot-output-element shiny-plot-output",r_func:"plotOutput"},{value:"image",label:"Image",css_class:"image-output-element shiny-image-output",r_func:"imageOutput"},{value:"table",label:"Table",css_class:"table-output-element shiny-datatable-output",r_func:"DT::DTOutput"},{value:"html",label:"HTML",css_class:"html-output-element shiny-html-output",r_func:"uiOutput",placeholder:"Placeholder for HTML Output"}];notes=["Plot and image output will show area of plot, but image will not stretch to fit"];html=`
        <$html_tag$ $id_str$ class="designer-element output-element $css_class$"
            style="$style_str$"
            data-shinyfunction="$r_func$"
            data-shinyattributes="outputId = &quot;$id$&quot;$inline_str$$dim_str$">
            $output_tag$
        </$html_tag$>
    `;constructor(){super(),this.showRelevantOptions(),this.updateType(),this.updateTextInput("id",""),this.updateTextInput("label","Label"),this.updateTextInput("height","400px"),this.updateTextInput("width","100%"),this.updateLabel("id","Output ID")}createComponent(){let t=$("#sidebar-label").val(),e=$("#sidebar-id").val();e=e===""?this.createID("output"):e;let a=$("#sidebar-type").val(),n=this.types.find(b=>b.value===a);if(!n)return;let l=n.r_func,r=a==="verbatim"?"pre":"div",o=n.css_class,d="";if(["plot","image","table"].includes(a)){let b=this.createID("output");Shiny.setInputValue("sidebar-outputid",b),d=`id="sidebar-${b}"`}let u=document.getElementById("sidebar-inline").checked&&!["verbatim","table"].includes(a)?", inline = TRUE":"";u!==""&&(r="span");let g="",v="";if(["plot","image"].includes(a)){let b=this.validateCssUnit($("#sidebar-width").val(),"100%"),x=`width: ${b};`,_=b==="100%"?"":`, width = &quot;${b}&quot;`,J=this.validateCssUnit($("#sidebar-height").val(),"400px");x=x+` height: ${J};`,_=_+(J==="400px"?"":`, height = &quot;${J}&quot;`)}let f="";return n.placeholder&&(a==="html"?f=`<span>${n.placeholder}</span>`:f=`<span>${n.placeholder} ${$("#sidebar-textarea").val()}</span>`),this.replaceHTMLPlaceholders(this.html,{html_tag:r,id:e,label:t,id_str:d,r_func:l,css_class:o,style_str:v,dim_str:g,inline_str:u,output_tag:f})}updateComponent(t=!1){super.updateComponent(t),Shiny.bindAll()}};var F=class extends i{_item=1;name="Tab";constructor(){super(),$("#component_settings").css("display","none"),$("#tab_settings").css("display","unset")}updateComponent(){}getPageType(){return $("#settings-page_type input:radio:checked").val()}addPage(){let t=this.getPageType(),e=$("#sidebar-tab_name").val(),a=$("#sidebar-tab_value").val();if(a==="")a=this.createID("tab");else if(this.checkDuplicateIDs(a,t))return;$("#sidebar-tab_alert div").alert("close"),t==="dashboardPage"?this.addMenuItem(e,a):this.addTab(e,a)}addTab(t,e){let a=$("ul.navbar-nav"),n=a.data("tabsetid"),l=$(".tab-content"),r=l.html()===""?"active":"";a.append(`
            <li class="${r}">
                <a href="#tab-${n}-${this._item}" data-toggle="tab"
                   data-bs-toggle="tab" data-value="${e}" data-name="${t}">${t}</a>
            </li>
        `),l.append(`
            <div class="tab-pane ${r}" data-value="${e}" id="tab-${n}-${this._item}"
                 data-shinyfunction="tabPanel" data-shinyattributes="title = &quot;${t}&quot;, value = &quot;${e}&quot;"></div>
        `),this.enableSortablePage(`tab-${n}-${this._item}`),this._item=this._item+1}addMenuItem(t,e){let a=$("section.content .tab-content"),n=a.html()===""?"active":"";$(".sidebarMenuSelectedTabItem").before(`
            <li class="nav-item" data-shinyfunction="bs4Dash::menuItem"
                data-shinyattributes="text = &quot;${t}&quot;, tabName = &quot;${e}&quot;">
                <a class="nav-link ${n}" id="tab-${e}" href="#"
                   data-toggle="tab" data-target="#shiny-tab-${e}"
                   data-value="${e}" data-name="${t}">
                    <p>${t}</p>
                </a>
            </li>
        `),$(".sidebarMenuSelectedTabItem").attr("data-value")||$(".sidebarMenuSelectedTabItem").attr("data-value",e),a.append(`
            <div role="tabpanel" data-value="${e}" id="shiny-tab-${e}"
                 class="tab-pane container-fluid ${n}"
                    data-shinyfunction="bs4Dash::tabItem" data-shinyattributes="tabName = &quot;${e}&quot;"></div>
        `),this.enableSortablePage(`shiny-tab-${e}`)}enableSortablePage(t){Sortable.create(document.getElementById(t),{group:{name:"shared",put:function(e,a,n){return!n.classList.contains("col-sm")}}})}checkDuplicateNames(t,e){return $(this.getNameIdentifier(t,e)).length>0?($("#sidebar-tab_alert").html(`
                <div class="alert alert-danger" role="alert">
                    ${t} is the name of an existing menu item. Please choose a unique name
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
            `),!0):!1}getNameIdentifier(t,e){return e==="dashboardPage"?`ul.sidebar-menu a[data-name='${t}']`:`ul.navbar-nav a[data-name='${t}']`}checkDuplicateIDs(t,e){return $(this.getValueIdentifier(t,e)).length>0?($("#sidebar-tab_alert").html(`
                <div class="alert alert-danger" role="alert">
                    ${t} is the ID of an existing menu item. Please choose a unique ID
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
            `),!0):!1}getValueIdentifier(t,e){return e==="dashboardPage"?`ul.sidebar-menu a[data-value='${t}']`:`ul.navbar-nav a[data-value='${t}']`}deletePage(){let t=this.getPageType(),e=$("#sidebar-tab_name").val(),a=$("#sidebar-tab_value").val();if(this.checkMissingName(e,t))return!0;if(this.getNameIdentifier(e,t).length>1&&a==="")return $("#sidebar-tab_alert").html(`
                <div class="alert alert-danger" role="alert">
                    Duplicate tabs contain the name "${e}" and no value has been provided. Please provide the specific ID of the tab to delete.
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
            `),!0;$("#sidebar-tab_alert div").alert("close"),t==="dashboardPage"?(a=a===""?$(`ul.nav a[data-name='${e}']`).data("value"):a,this.deleteMenuItem(a)):(a=a===""?$(`ul.nav a[data-name='${e}']`).data("value"):a,this.deleteTab(a))}deleteTab(t){$(`ul.nav a[data-value='${t}']`).parent().remove(),$(`.tab-content .tab-pane[data-value='${t}']`).remove()}deleteMenuItem(t){$(`#tab-${t}`).parent().remove(),$(`#shiny-tab-${t}`).remove()}checkMissingName(t,e){return $(this.getNameIdentifier(t,e)).length>0?!1:($("#sidebar-tab_alert").html(`
                <div class="alert alert-danger" role="alert">
                    Unable to find a tab with the name "${t}"
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
            `),!0)}};var z=class extends i{name="Box";parameters=["label","colour","background","width_num"];notes=["If the width > 0, then the box is included in a column and can only be included in <b>rows</b>","Rows are split into 12 column units, if the sum of boxs' width exceeds 12, they get wrapped onto a new line"];html=`
        <div class="$width_class$ designer-element"
             data-shinyfunction="bs4Dash::bs4Card"
             data-shinyattributes="title = &quot;$label$&quot;, status = &quot;$colour$&quot;, background = &quot;$background$&quot;, width = $width_r$">
            <div class="card bs4Dash $colour_class$ $background_class$">
                <div class="card-header">
                    <h3 class="card-title">$label$</h3>
                    <div class="card-tools float-right">
                        <button class="btn btn-tool btn-sm $background_class$" type="button" data-card-widget="collapse">
                            <i class="fa fa-minus" role="presentation" aria-label="minus icon"></i>
                        </button>
                    </div>
                </div>
                <div class="card-body"></div>
            </div>
            <script type="application /json">{
                "solidHeader":true,"width":$width$,"collapsible":true,"closable":false,"maximizable":false,
                "gradient":false,"background":"$background$","status":"$colour$"
            }<\/script>
        </div>
    `;sortable_settings={group:{name:"shared",put:function(t,e,a){return!a.classList.contains("col-sm")}}};constructor(){super(),this.showRelevantOptions(),this.updateTextInput("label","Label"),this.updateTextInput("width_num",6),$("#sidebar-width_num").attr("min",0)}createComponent(){let t=$("#sidebar-label").val(),e=$("#sidebar-width_num").val(),a=e>0?`col-sm col-sm-${e}`:"",n=e>0?e:"NULL",l=$("#sidebar-colour").val(),r=l==="white"?"":`card-outline card-${l}`,o=$("#sidebar-background").val(),d=o==="white"?"":`bg-${o}`;return this.replaceHTMLPlaceholders(this.html,{label:t,width_class:a,width_r:n,colour:l,colour_class:r,background:o,background_class:d})}};var j=class extends i{name="Value Box";parameters=["value","label","background","width_num"];notes=["If the width > 0, then the box is included in a column and can only be included in <b>rows</b>","Rows are split into 12 column units, if the sum of boxs' width exceeds 12, they get wrapped onto a new line"];html=`
        <div class="$width_class$ designer-element"
             data-shinyfunction="bs4Dash::bs4ValueBox"
             data-shinyattributes="value = &quot;$value$&quot;, subtitle = &quot;$label$&quot;, color = &quot;$background$&quot;, width = $width$">
            <div class="small-box $colour_class$">
                <div class="inner">
                    $value$
                    <p class="small-box-subtitle">
                        $label$
                    </p>
                </div>
                <div class="small-box-footer" style="height: 30px;"></div>
            </div>
        </div>
    `;sortable_settings={group:{name:"shared",put:function(t,e,a){return!a.classList.contains("col-sm")}}};constructor(){super(),this.showRelevantOptions(),this.updateTextInput("value","-"),this.updateTextInput("label","Label"),this.updateTextInput("width_num",3),$("#sidebar-width_num").attr("min",0)}createComponent(){let t=$("#sidebar-value").val(),e=$("#sidebar-label").val(),a=$("#sidebar-width_num").val(),n=a>0?`col-sm col-sm-${a}`:"",l=a>0?a:"NULL",r=$("#sidebar-background").val(),o=r==="white"?"":`bg-${r}`;return this.replaceHTMLPlaceholders(this.html,{value:t,label:e,width_class:n,width_r:l,colour:r,colour_class:o})}};function G(s){return s==="header"?new w:s==="row"?new L:s==="column"?new D:s==="text"?new S:s==="input_panel"?new O:s==="input"?new M:s==="dropdown"?new H:s==="file"?new B:s==="date"?new R:s==="checkbox"?new N:s==="radio"?new U:s==="slider"?new E:s==="button"?new V:s==="output"?new A:s==="tab_panel"?new F:s==="box"?new z:s==="value_box"?new j:new w}var c;function et(){c=new G("header"),c.updateComponent(!0),$(".component-settings").on("change keyup",()=>c.updateComponent()),$(".component-comments").on("change blur",()=>c.updateComponent()),$(".component-container").on("mouseover",()=>{$(":focus").trigger("blur")}),$("#sidebar-tab_add").on("click",()=>c.addPage()),$("#sidebar-tab_delete").on("click",()=>c.deletePage()),$("#settings-component .dropdown-item").on("click",s=>{c=new G($(s.target).data("shinyelement")),c.updateComponent(!0),$("#settings-component .dropdown-item").removeClass("active"),$(s.target).addClass("active")})}function Y(s,t=!1){var e=at(s),a={tagName:s.tagName.toLowerCase(),r_function:s.dataset.shinyfunction,r_arguments:s.dataset.shinyattributes,r_comments:s.dataset.shinycomments,text:$(s).ignore().text().replace(/\s*\n\s*/g,""),htmlclass:s.className,children:e};return t?a:JSON.stringify(a)}$.fn.ignore=function(s){return this.clone().find(s||">*").remove().end()};function at(s){for(var t=[],e=0;e<s.children.length;e++)if(s.children[e].dataset.shinyfunction)t.push(Y(s.children[e],!0));else if(s.children[e].children.length){var a=at(s.children[e]);a.length&&(t=t.concat(a))}return t}var W=new Shiny.InputBinding;$.extend(W,{find:function(s){return $(s).find(".page-canvas")},getValue:function(s){return Y(document.getElementById("canvas-page"))},setValue:function(s,t){$(s).text(t)},subscribe:function(s,t){new MutationObserver(function(){t()}).observe(s,{subtree:!0,childList:!0,attributes:!0})},unsubscribe:function(s){$(s).off(".page-canvas")}});$(function(){Z(),et(),tt(),$(".help-icon").tooltip({boundary:"window",placement:"right"}),Sortable.create(document.getElementById("sidebar-bin"),{group:{name:"shared",pull:!1},handle:".designer-element",draggable:".designer-element",onAdd:function(s){this.el.removeChild(s.item)}})});Shiny.inputBindings.register(W);
//# sourceMappingURL=designer.min.js.map
