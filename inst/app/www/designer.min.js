function htmlToJSON(n,e=!1){if(n){var t=getChildrenJSON(n),t={tagName:n.tagName.toLowerCase(),r_function:n.dataset.shinyfunction,r_arguments:n.dataset.shinyattributes,r_comments:n.dataset.shinycomments,text:$(n).ignore().text().replace(/\s*\n\s*/g,""),htmlclass:n.className,children:t};return e?t:JSON.stringify(t)}}function getChildrenJSON(n){for(var e,t=[],i=0;i<n.children.length;i++)n.children[i].dataset.shinyfunction?t.push(htmlToJSON(n.children[i],!0)):!n.children[i].children.length||(e=getChildrenJSON(n.children[i])).length&&(t=t.concat(e));return t}$.fn.ignore=function(n){return this.clone().find(n||">*").remove().end()};var canvasPageBinding=new Shiny.InputBinding;$.extend(canvasPageBinding,{find:function(n){return $(n).find(".page-canvas")},getValue:function(n){return htmlToJSON(document.getElementById("canvas-page"))},setValue:function(n,e){$(n).text(e)},subscribe:function(n,e){const t=new MutationObserver(function(){e()});t.observe(n,{subtree:!0,childList:!0,attributes:!0})},unsubscribe:function(n){$(n).off(".page-canvas")}}),Shiny.inputBindings.register(canvasPageBinding);