var l=class{navbar_item_style="none";bs4_item_style="none";enable_on_load=!0;page_html;constructor(){}updateComponentDropdown(){$(".navbar-tab-item").css("display",this.navbar_item_style),$(".bs4-item").css("display",this.bs4_item_style),this.navbar_item_style==="none"?$("#settings-component a[name='header']").trigger("click"):$("#settings-component a[name='tab_panel']").trigger("click")}getPageHTML(t,e=""){return t.replaceAll("$page_id$",this.getTabID()).replaceAll("$title$",e)}updatePage(){let t=$("#canvas-title").html();$(".page-canvas").html(this.getPageHTML(this.page_html,t))}enableSortablePage(t){Sortable.create(document.getElementById(t),{group:{name:"shared",put:function(e,a,i){return!i.classList.contains("col-sm")}}})}getTabID(){return Math.round(Math.random()*8999+1e3)}};var m=class extends l{page_html=`
        <div id="canvas-page" class="designer-page-template container-fluid" data-shinyfunction="basicPage"></div>
    `};var g=class extends l{page_html=`
        <div id="canvas-page" class="designer-page-template" 
             data-shinyfunction="fillPage"
             data-shinyattributes="title = &quot;$title$&quot;, theme = bslib::bs_theme(4)"></div>
    `};var v=class extends l{page_html=`
        <div id="canvas-page" class="designer-page-template container-fluid" 
             data-shinyfunction="fluidPage"
             data-shinyattributes="title = &quot;$title$&quot;, theme = bslib::bs_theme(4)"></div>
    `};var f=class extends l{page_html=`
        <div id="canvas-page" class="designer-page-template container-fluid" 
             data-shinyfunction="bootstrapPage"
             data-shinyattributes="title = &quot;$title$&quot;, theme = bslib::bs_theme(4)"></div>
    `};var y=class extends l{navbar_item_style="";enable_on_load=!1;page_html=`
        <div class="designer-page-template">
            <nav class="navbar navbar-default navbar-static-top" role="navigation">
                <div class="container-fluid">
                    <div class="navbar-header">
                        <span class="navbar-brand">$title$</span>
                    </div>
                    <ul class="nav navbar-nav" data-tabsetid="$page_id$"></ul>
                </div>
            </nav>
            <div class="container-fluid navbar-page-tabs">
                <div id="canvas-page" class="tab-content"
                     data-tabsetid="$page_id$" data-shinyfunction="navbarPage"
                     data-shinyattributes="title = &quot;$title$&quot;, theme = bslib::bs_theme(4)"></div>
            </div>
        </div>
    `};var _=class extends l{navbar_item_style="";bs4_item_style="";enable_on_load=!1;page_html=`
        <div id="canvas-page" class="wrapper designer-page-template"
             data-shinyfunction="bs4Dash::dashboardPage" data-shinyattributes="title = &quot;$title$&quot;">
            <nav data-fixed="false" class="main-header navbar navbar-expand navbar-white navbar-light"
                 data-shinyfunction="bs4Dash::dashboardHeader" data-shinyattributes="title = &quot;$title$&quot;">
                <ul class="navbar-nav">
                    <a class="nav-link" data-widget="pushmenu" href="#">
                        <i class="fa fa-bars" role="presentation" aria-label="bars icon"></i>
                    </a>
                </ul>
                <ul class="navbar-nav ml-auto navbar-right"></ul>
            </nav>
            <aside id="sidebarId" data-fixed="true" data-minified="true" data-collapsed="false"
                   data-disable="FALSE" class="main-sidebar sidebar-dark-primary elevation-4"
                   data-shinyfunction="bs4Dash::dashboardSidebar">
                <div class="brand-link">$title$</div>
                <div class="sidebar" id="sidebarItemExpanded">
                    <nav class="mt-2">
                        <ul class="nav nav-pills nav-sidebar flex-column sidebar-menu nav-child-indent"
                            data-widget="treeview" role="menu" data-accordion="true" data-shinyfunction="bs4Dash::sidebarMenu">
                            <div id="tabs_$page_id$" class="sidebarMenuSelectedTabItem"></div>
                        </ul>
                    </nav>
                </div>
            </aside>
            <div class="content-wrapper" data-shinyfunction="bs4Dash::dashboardBody">
                <section class="content">
                    <div class="tab-content"></div>
                </section>
            </div>
        </div>
    `};function w(){var n=$("#settings-page_type input:radio:checked").val(),t;return n==="basicPage"?t=new m:n==="fillPage"?t=new g:n==="fluidPage"?t=new v:n==="bootstrapPage"?t=new f:n==="navbarPage"?t=new y:n==="dashboardPage"?t=new _:t=new m,t.updatePage(),t.enable_on_load&&t.enableSortablePage("canvas-page"),t.updateComponentDropdown(),t}function S(){$("#canvas-page").html()===""?($("#canvas-page").html("<div></div>"),w()):$("#warning_modal").modal()}function B(n){let t=$(n.target).val();if($("#canvas-title").html(t),$(".navbar-brand").html(t),$(".brand-link").html(t),$("#canvas-page").data("shinyattributes")){var e=$("#canvas-page").data("shinyattributes").replace(/"[^"]+"/,`"${t}"`);$("#canvas-page").attr("data-shinyattributes",e)}if($("#canvas-page>.main-header").data("shinyattributes")){var a=$("#canvas-page>.main-header").data("shinyattributes").replace(/"[^"]+"/,`"${t}"`);$("#canvas-page>.main-header").attr("data-shinyattributes",a)}}function U(){w(),$("#settings-page_type").on("change",S),$("#confirm_reset").on("click",w),$("#app_name").on("change keyup",B)}function A(){$(".copy-ui-button").on("click",K),$("#remove_label").on("change",j),$("#remove_colour").on("change",G),$("#remove_border").on("change",J),$(document).on("click",".clickable-dropdown",n=>{n.stopPropagation()}),$("#preview").on("click",()=>{$(".page-canvas-shell").addClass("preview")}),$("#canvas-close_preview").on("click",()=>{$(".page-canvas-shell").removeClass("preview")})}function j(){this.checked?$(".designer-page-template").removeClass("hidden-after-label"):$(".designer-page-template").addClass("hidden-after-label")}function G(){this.checked?$(".designer-page-template").removeClass("hidden-colour"):$(".designer-page-template").addClass("hidden-colour")}function J(){this.checked?$(".designer-page-template").removeClass("hidden-borders"):$(".designer-page-template").addClass("hidden-borders")}function K(){var n=document.getElementById("settings-code-code").textContent;navigator.clipboard.writeText(n)}var s=class{updatable=!0;name;parameters;tags;types;notes;sortable_settings;html;constructor(){}showRelevantOptions(){$(".component-settings").css("display","");for(let t=0;t<this.parameters.length;t++)$(".component-settings[data-component= '"+this.parameters[t]+"']").css("display","unset");this.updateTitle(),this.updateNotes()}updateTitle(){let t=this.name?`${this.name} Settings`:null;$("#sidebar-title").html(t)}updateNotes(){if($("#sidebar-notes").html(null),this.notes){$("#sidebar-notes").html("<h3>Notes</h3><ul></ul>");for(let t=0;t<this.notes.length;t++)$("#sidebar-notes ul").append("<li>"+this.notes[t]+"</li>")}}createComponent(){return this.html}replaceHTMLPlaceholders(t,e){for(let a in e)t=t.replaceAll("$"+a+"$",e[a]);return t}updateComponent(t=!1){$(".component-container").html(null);let e=this.createComponent();$(".component-container").html(e),this.addComments(),t&&this.enableSortable()}enableSortable(){Sortable.create(document.getElementById("sidebar-container"),{group:{name:"shared",pull:"clone",put:!1},onClone:function(t){d.sortable_settings&&Sortable.create(t.item,d.sortable_settings)},onEnd:function(t){$('.page-canvas [data-toggle="tooltip"]').tooltip(),(d.updatable||$("#sidebar-comments").val()!=="")&&($("#sidebar-comments").val(""),d.updateComponent())}})}addComments(){let t=$("#sidebar-comments").val();t&&($(".component-container>.designer-element").attr("data-shinycomments",t),$(".component-container>.designer-element").attr("title",t),$(".component-container>.designer-element").attr("data-toggle","tooltip"))}updateTag(){if(this.tags){var t=$("#sidebar-tag").selectize()[0].selectize;t.clearOptions(!0),t.addOption(this.tags),t.refreshOptions(!1),t.addItem(this.tags[0].value)}}updateType(){if(this.types){var t=$("#sidebar-type").selectize()[0].selectize;t.clearOptions(!0),t.addOption(this.types),t.refreshOptions(!1),t.addItem(this.types[0].value)}}updateTextInput(t,e=""){$(`#sidebar-${t}`).val(e)}updateText(t=""){$("#sidebar-text").val(t)}updateTextArea(t=""){$("#sidebar-textarea").val(t)}updateTextLabel(t="label"){$("#sidebar-label").val(t)}createID(t=""){return t=t&&t+"_",t+Math.random().toString(36).substring(2,12)}validateCssUnit(t,e){return this._regex.test(t)?t:/^\d+$/.test(t)?t+"px":e}_regex=/^(auto|inherit|fit-content|calc\(.*\)|((\.\d+)|(\d+(\.\d+)?))(%|in|cm|mm|ch|em|ex|rem|pt|pc|px|vh|vw|vmin|vmax))$/};var b=class extends s{name="Header";parameters=["tag","text"];tags=[{value:"h1",label:"h1",text:"h1"},{value:"h2",label:"h2",text:"h2"},{value:"h3",label:"h3",text:"h3"},{value:"h4",label:"h4",text:"h4"},{value:"h5",label:"h5",text:"h5"},{value:"h6",label:"h6",text:"h6"}];html='<$tag$ class="designer-element" data-shinyfunction="$tag$">$value$</$tag$>';constructor(){super(),this.showRelevantOptions(),this.updateTag(),this.updateText("Header")}createComponent(){let t=$("#sidebar-tag").val(),e=$("#sidebar-text").val();return this.replaceHTMLPlaceholders(this.html,{tag:t,value:e})}};var x=class extends s{parameters=[];updatable=!1;html='<div class="designer-element row row-designer" data-shinyfunction="fluidRow"></div>';notes=["The only component that can be a direct child of a row are columns.","By default, a row will have no height and is determined by the contents inside. To easily drop elements into the rows, they have a minimum height of 50px in this app."];sortable_settings={group:{name:"shared",put:function(t,e,a){return a.classList.contains("col-sm")}}};constructor(){super(),this.showRelevantOptions()}};var C=class extends s{name="column";parameters=["width_num","offset"];updatable=!1;html=`
        <div class="designer-element col-sm col-sm-$width$$offset_class$"
             data-shinyfunction="column"
             data-shinyattributes="width = $width$$offset_r$"></div>
    `;notes=["Columns can only be included in <b>rows</b>.","Rows are split into 12 column units, if the sum of columns' width exceeds 12, they get wrapped onto a new line."];sortable_settings={group:{name:"shared",put:function(t,e,a){return!a.classList.contains("col-sm")}}};constructor(){super(),this.showRelevantOptions()}createComponent(){let t=$("#sidebar-width_num").val(),e=$("#sidebar-offset").val();var a=e>0?` offset-md-${e}`:"",i=e>0?`, offset = ${e}`:"";return this.replaceHTMLPlaceholders(this.html,{width:t,offset_class:a,offset_r:i})}};var I=class extends s{name="Text";parameters=["tag","textarea"];tags=[{value:"p",label:"Paragraph <p>",text:"Paragraph <p>"},{value:"ol",label:"Ordered List <ol>",text:"Ordered List <ol>"},{value:"ul",label:"Unordered List <ul>",text:"Unordered List <ul>"}];html='<$tag$ class="designer-element" data-shinyfunction="tags$$tag$">$value$</$tag$>';constructor(){super(),this.showRelevantOptions(),this.updateTag(),this.updateTextArea("")}createComponent(){let t=$("#sidebar-tag").val(),e=$("#sidebar-textarea").val(),a=t==="p"?e.replace(/\n/g," "):this.createListItems(e);return this.replaceHTMLPlaceholders(this.html,{tag:t,value:a})}createListItems(t){return t.split(`
`).map(e=>'<li data-shinyfunction="tags$li">'+e+"</li>").join("")}};var T=class extends s{parameters=[];updatable=!1;html='<div class="designer-element shiny-input-panel shiny-flow-layout" data-shinyfunction="inputPanel"></div>';notes=["By default inputs will be aligned vertically, input panels enable the inputs to be aligned horizontally."];sortable_settings={group:{name:"shared",put:function(t,e,a){return a.classList.contains("form-group")||a.classList.contains("btn")}}};constructor(){super(),this.showRelevantOptions()}};var q=class extends s{name="Input";parameters=["type","id","label","width"];types=[{value:"text",label:"Text",r_func:"textInput"},{value:"textarea",label:"Text Area",r_func:"textAreaInput"},{value:"number",label:"Numeric",r_func:"numericInput"},{value:"password",label:"Password",r_func:"passwordInput"}];notes=["To position several inputs horizontally, they must be put within an input panel."];html=`
        <div class="designer-element form-group shiny-input-container" 
             $style_str$
             data-shinyattributes="inputId = &quot;$id$&quot;, label = &quot;label&quot;$style_str$"
             data-shinyfunction="$r_func$"><label class="control-label">$label$</label>$input_tag$</div>
    `;constructor(){super(),this.showRelevantOptions(),this.updateType(),this.updateTextInput("id",""),this.updateTextInput("label","Label"),this.updateTextInput("width","")}createComponent(){let t=$("#sidebar-label").val(),e=$("#sidebar-id").val();e=e===""?this.createID("input"):e;let a=$("#sidebar-type").val(),i=this.types.find(h=>h.value===a),o=i.r_func,p;a==="textarea"?p='<textarea class="form-control" placeholder="textarea input"></textarea>':p=`<input class="form-control" type="${a}" placeholder="${i.label} input">`;let r=this.validateCssUnit($("#sidebar-width").val()),c=r?`width: ${r};`:"",u=r?`, width = &quot;${r}&quot;`:"";return this.replaceHTMLPlaceholders(this.html,{id:e,label:t,r_func:o,input_tag:p,style_str:c,width_str:u})}};var P=class extends s{name="File Input";parameters=["id","label","width"];notes=["To position several inputs horizontally, they must be put within an input panel."];html=`
        <div class="designer-element form-group shiny-input-container"
             data-shinyfunction="fileInput" $style_str$
             data-shinyattributes="inputId = &quot;$id$&quot;, label = &quot;$label$&quot;$width_str$">
            <label class="control-label">$label$</label>
            <div class="input-group">
                <label class="input-group-btn input-group-prepend">
                    <span class="btn btn-default btn-file">
                        Browse...
                        <input type="file" style="position: absolute !important; top: -99999px !important; left: -99999px !important;"/>
                    </span>
                </label>
                <input type="text" class="form-control" placeholder="No file selected" readonly="readonly"/>
            </div>
        </div>
    `;constructor(){super(),this.showRelevantOptions(),this.updateTextInput("id",""),this.updateTextInput("label","Label"),this.updateTextInput("width","")}createComponent(){let t=$("#sidebar-label").val(),e=$("#sidebar-id").val();e=e===""?this.createID("input"):e;let a=this.validateCssUnit($("#sidebar-width").val()),i=a?`width: ${a};`:"",o=a?`, width = &quot;${a}&quot;`:"";return this.replaceHTMLPlaceholders(this.html,{id:e,label:t,style_str:i,width_str:o})}};var k=class extends s{name="Dropdown";parameters=["id","label","width"];notes=["To position several inputs horizontally, they must be put within an input panel."];html=`
        <div class="designer-element form-group shiny-input-container" $style_str$
             data-shinyattributes="inputId = &quot;$id$&quot;, label = &quot;$label$&quot;, choices = NULL$width_str$"
             data-shinyfunction="selectInput">
             <label class="control-label">$label$</label>
             <div>
                <select>
            </div>
        </div>
    `;constructor(){super(),this.showRelevantOptions(),this.updateTextInput("id",""),this.updateTextInput("label","Label"),this.updateTextInput("width","")}createComponent(){let t=$("#sidebar-label").val(),e=$("#sidebar-id").val();e=e===""?this.createID("input"):e;let a=this.validateCssUnit($("#sidebar-width").val()),i=a?`width: ${a};`:"",o=a?`, width = &quot;${a}&quot;`:"";return this.replaceHTMLPlaceholders(this.html,{id:e,label:t,style_str:i,width_str:o})}updateComponent(t=!1){super.updateComponent(t),$(".component-container").find("select").selectize({labelField:"label",valueField:"value",searchField:["label"],placeholder:"select input"})}};var L=class extends s{name="Date";parameters=["id","label","range","width"];notes=["To position several inputs horizontally, they must be put within an input panel."];html=`
        <div class="designer-element form-group shiny-input-container $date_class$" $style_str$
             data-shinyattributes="inputId = &quot;$id$&quot;, label = &quot;$label$&quot;$width_str$"
             data-shinyfunction="$r_func$">
             <label class="control-label">$label$</label>
             $input_tag$
        </div>
    `;date_input_html=`
        <input class="form-control" type="text" title="Date format: yyyy-mm-dd" placeholder="date input"
               data-date-language="en" data-date-week-start="0" data-date-format="yyyy-mm-dd"
               data-date-start-view="month" data-date-autoclose="true"/>
    `;date_range_input_html=`
        <div class="input-daterange input-group input-group-sm">
            <input class="form-control" type="text" title="Date format: yyyy-mm-dd" placeholder="date input"
                   data-date-language="en" data-date-week-start="0" data-date-format="yyyy-mm-dd"
                   data-date-start-view="month" data-date-autoclose="true"/>
            <span class="input-group-addon input-group-prepend input-group-append">
                <span class ="input-group-text"> to </span>
            </span>               
            <input class="form-control" type="text" title="Date format: yyyy-mm-dd" placeholder="date input"
                   data-date-language="en" data-date-week-start="0" data-date-format="yyyy-mm-dd"
                   data-date-start-view="month" data-date-autoclose="true"/>        
        </div>       
    `;constructor(){super(),this.showRelevantOptions(),this.updateTextInput("id",""),this.updateTextInput("label","Label"),this.updateTextInput("width","")}createComponent(){let t=$("#sidebar-label").val(),e=$("#sidebar-id").val();e=e===""?this.createID("input"):e;let a=this.validateCssUnit($("#sidebar-width").val()),i=a?`width: ${a};`:"",o=a?`, width = &quot;${a}&quot;`:"",p=document.getElementById("sidebar-range").checked,r=p?"dateRangeInput":"dateInput",c=p?"shiny-date-range-input":"shiny-date-input",u=p?this.date_range_input_html:this.date_input_html;return this.replaceHTMLPlaceholders(this.html,{id:e,label:t,r_func:r,date_class:c,input_tag:u,style_str:i,width_str:o})}updateComponent(t=!1){super.updateComponent(t),$(".component-container").find("input").bsDatepicker()}};var D=class extends s{name="Checkbox";parameters=["id","label","width"];html=`
        <div class="designer-element form-group shiny-input-container" $style_str$
                 data-shinyfunction="checkboxInput"
                 data-shinyattributes="inputId = &quot;$id&quot;, label = &quot;$label&quot;$width_str$">
            <div class="checkbox">
                <label>
                    <input type="checkbox"><span>$label$</span>
                </label>
            </div>
        </div>
    `;constructor(){super(),this.showRelevantOptions(),this.updateTextInput("id",""),this.updateTextInput("label","Label"),this.updateTextInput("width","")}createComponent(){let t=$("#sidebar-label").val(),e=$("#sidebar-id").val();e=e===""?this.createID("input"):e;let a=this.validateCssUnit($("#sidebar-width").val()),i=a?`width: ${a};`:"",o=a?`, width = &quot;${a}&quot;`:"";return this.replaceHTMLPlaceholders(this.html,{id:e,label:t,style_str:i,width_str:o})}};var O=class extends s{name="Checkbox Group";parameters=["type","id","label","choices","inline","width"];types=[{value:"radio",label:"Radio",r_func:"radioButtons",role:"radiogroup"},{value:"checkbox",label:"Checkbox",r_func:"checkboxGroupInput",role:"group"}];html=`
        <div class="designer-element form-group shiny-input-container $css_class$" $style_str$
             data-shinyfunction="$r_func$" 
             data-shinyattributes="inputId = &quot;$id$&quot;, label = &quot;$label$&quot;$choices_str$$width_str$"
             role="$role">
            <label class="control-label">$label$</label>
            <div class="shiny-options-group">
                $choices$
            </div>
        </div>
    `;constructor(){super(),this.showRelevantOptions(),this.updateType(),this.updateTextInput("id",""),this.updateTextInput("label","Label"),this.updateTextInput("choices",`Choice 1
Choice 2`),this.updateTextInput("width","")}createComponent(){let t=$("#sidebar-label").val(),e=$("#sidebar-id").val();e=e===""?this.createID("input"):e;var a=$("#sidebar-type").val();let i=this.types.find(M=>M.value===a),o=i.r_func,p=i.role,r=this.validateCssUnit($("#sidebar-width").val()),c=r?`width: ${r};`:"",u=r?`, width = &quot;${r}&quot;`:"";var h=document.getElementById("sidebar-inline").checked;let N=`shiny-input-${a}group${h?"-inline":""}`,H=$("#sidebar-choices").val(),F=`, choices = c(&quot;${H.replace(/\n/g,"&quot;, &quot;")}&quot;)`,z=H.split(`
`).map(M=>this.createCheckbox(M,e=e,a=a,h=h)).join("");return this.replaceHTMLPlaceholders(this.html,{id:e,label:t,css_class:N,r_func:o,role:p,choices:z,choices_str:F,style_str:c,width_str:u})}createCheckbox(t,e="",a="checkbox",i=!1){var o=i?a+"-inline":a;return`<label class="${o}"><input type="${a}"><span>${t}</span></label>`}};function R(n){return n==="header"?new b:n==="row"?new x:n==="column"?new C:n==="text"?new I:n==="input_panel"?new T:n==="input"?new q:n==="dropdown"?new k:n==="file"?new P:n==="date"?new L:n==="checkbox"?new D:n==="radio"?new O:new b}var d;function E(){d=new R("header"),d.updateComponent(!0),$(".component-parameters").on("change keyup",()=>d.updateComponent()),$(".component-comments").on("change blur",()=>d.updateComponent()),$(".component-container").on("mouseover",()=>{$(":focus").trigger("blur")}),$("#settings-component .dropdown-item").on("click",n=>{d=new R($(n.target).data("shinyelement")),d.updateComponent(!0),$("#settings-component .dropdown-item").removeClass("active"),$(n.target).addClass("active")})}$(function(){U(),E(),A(),$(".help-icon").tooltip({boundary:"window",placement:"right"}),Sortable.create(document.getElementById("sidebar-bin"),{group:{name:"shared",pull:!1},handle:".designer-element",draggable:".designer-element",onAdd:function(n){this.el.removeChild(n.item)}})});
//# sourceMappingURL=designer.min.js.map
