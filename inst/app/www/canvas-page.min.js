function i(n,e=!1){var t=s(n),r={tagName:n.tagName.toLowerCase(),r_function:n.dataset.shinyfunction,r_arguments:n.dataset.shinyattributes,r_comments:n.dataset.shinycomments,text:$(n).ignore().text().replace(/\s*\n\s*/g,""),htmlclass:n.className,children:t};return e?r:JSON.stringify(r)}$.fn.ignore=function(n){return this.clone().find(n||">*").remove().end()};function s(n){for(var e=[],t=0;t<n.children.length;t++)if(n.children[t].dataset.shinyfunction)e.push(i(n.children[t],!0));else if(n.children[t].children.length){var r=s(n.children[t]);r.length&&(e=e.concat(r))}return e}var a=new Shiny.InputBinding;$.extend(a,{find:function(n){return $(n).find(".page-canvas")},getValue:function(n){return i(document.getElementById("canvas-page"))},setValue:function(n,e){$(n).text(e)},subscribe:function(n,e){new MutationObserver(function(){e()}).observe(n,{subtree:!0,childList:!0,attributes:!0})},unsubscribe:function(n){$(n).off(".page-canvas")}});Shiny.inputBindings.register(a);
